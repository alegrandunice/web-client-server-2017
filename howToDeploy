Guide to deploy a mean stack application on heroku

Pour le déploiement de notre application mean stack on va utiliser mon compte heroku, je mets à votre disposition mon email et mon mot de passe :

username : ahmed.msellek@gmail.com	
password : webServerTeam

Vous devez avoir node, npm et git installé sur votre machine pour éviter toute erreur

vous devez installé Heroku cli sur votre machine, vous trouverez un lien pour le téléchargement ici : https://devcenter.heroku.com/articles/getting-started-with-nodejs#set-up

Une fois Heroku-cli est installé sur votre machine, vous pouvez vous loger au compte heroku en tapant la commande : heroku login 

initialiser le dossier parent de l'application en tant que repertoire git en tapant la commande git init afin de pouvoir deployer le projet sur Heroku

pour deployer le projet taper la commande :  git push heroku master

pour assurer que l'instance de l'application tourne au moin sur une instance tapper la commande : heroku ps:scale web=1

Pour ouvrir l'application dans une page web tapper la commande : heroku open

pour voir les logs de notre application qui tourne tapper la commande : heroku logs --tail

on peut utiliser un procfile qui est une fichier text placer à la racine de notre projet, il permet de déclarer explixitement les commande à executer pour chaque process; une fichier procfile qui contient la ligne suivante : web: node app.js demande à executer la commande node app.js pour le process web qui permet d'utiliser les fonctionnalités de routing http de la plateforme Heroku

Pour lancer l'application en local tapper la commande : heroku local web

Pour pouvoir pusher les modification faites en local vous faite : 
1- git add --all
2- git commit -am "message"
3- git push heroku master


Pour pouvoir utiliser mongoDB dans notre application, on a besoin d'installer un addons et ceci en tappant la commande : heroku addons:add mongolab
heroku nous offre 500mb gratuite 
dans notre code pour se connecter à mongodb on a utiliser le code : MongoClient.connect(url, function(err, db) { ...
mais quand on deploie on doit le remplacer avec :  MongoClient.connect(process.env.MONGODB_URI, function (err, database) { ..
voir l'exemple dans cet URL : https://devcenter.heroku.com/articles/mean-apps-restful-api

  
